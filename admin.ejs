<html lang="en">

<head>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="main.js"></script>
    <link rel="stylesheet" href="styles.css">
    <title>admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />




</head>

<body>


    <header>
        <!--Nav Container-->
        <div class="nav container">
            <!--Menu Icon-->
            <i class='bx bx-menu' id="menu-icon"></i>
            <!--Logo-->

            <a href="#" class="logo">Car<span>Souq </span>Dashboard</a>
            <!--Navbar List-->

            <ul class="navbar">
                <li> <a href="#reg" class="active">Home</a></li>
                <li> <a href="#customers">Review</a></li>
                <li> <a href="#partss"> Car Adds</a></li>
                <li><a href="/admin/logout" class="logout-button">Log Out</a></li>
            </ul>
            <!--search Icon-->
        </div>
    </header>

    <br>
    <br>
    <br>
    <br>
    <section class="reg" id="reg">
        <table class="reg">
            <div class="heading">
                <h3>Customers <span>Registration</span></h3>
            </div>
            <tbody>
                <% arrNode.forEach(node=> { %>
                    <tr>
                        <td>
                            <span>name::</span>
                            <%= node.name %>
                        </td>
                        <td>
                            <span>email::</span>
                            <%= node.email %>
                        </td>
                        <td>
                            <span>Hashed password::</span>
                            <%= node.password %>
                        </td>

                        <td>
                            <span>number::</span>
                            <%= node.number%>
                        </td>
                    </tr>
                    <% }); %>
            </tbody>
        </table>
    </section>

    <section class="customers " id="customers">
        <div class="sec-width">

            <h2>Customers <span> Reviews</span></h2>

            <div class="customers">
                <section class="customers" id="customers">
                    <div class="sec-width">

                        <div class="customers-container">
                            <% arrReview.forEach(item=> { %>
                                <div class="customer">

                                    <p>
                                        <%= item.reviews %>
                                    </p>
                                    <h3>
                                        <%= item.name1 %>
                                    </h3>
                                    <span>
                                        <%= item.country %>
                                    </span>
                                </div>
                                <% }); %>
                        </div>

                    </div>

                </section>
            </div>
        </div>
    </section>


    <section class="partss" id="partss">
        <div class="heading">
            <h3>Customers <span>Offers</span></h3>

        </div>

        <div class="partss-container container ">
            <% arrAdd.forEach(item=> { %>
                <div class="boxx">
                    <div class="admin-actions">
                        <button class="approve-ad" data-adid="<%= item._id %>">Approve</button>
                        <button class="refuse-ad" data-adid="<%= item._id %>">Refuse</button>
                    </div>
                    <div class="boxx" data-adid="<%= item._id %>">
                        <!-- Display the car image with the imgUrl parameter -->
                        <img src="<%= item.img %>" class="ad-image" alt="Car Image">
                        <!-- Other ad details can be added here -->

                        <!-- Car item details under the image -->
                        <h3>
                            <span>Car Model:</span>
                            <%= item.model %>
                        </h3>
                        <h3>
                            <span>Car Version:</span>
                            <%= item.version %>
                        </h3>
                        <h3>
                            <span>Car Status:</span>
                            <%= item.status %>
                        </h3>
                        <h3>
                            <span>Car Year:</span>
                            <%= item.year %>
                        </h3>
                        <h3>
                            <span>Car Price:</span>
                            <%= item.price %> L.E
                        </h3>

                    </div>

                </div>



                <% }); %>

                    <br>
                    <br>

                    <div class="review-container">

                        <a href="/add-admin.ejs" class="btn">Make Your Add Please</a>
                    </div>

        </div>
    </section>


    <section class="availability-container" id="availability-container">
        <table class="availability-container">
            <div class="heading">
                <h3>Customers <span>Checking</span></h3>
            </div>
            <tbody>
                <% arrAvailability.forEach(item=> { %>
                    <tr>
                        <td>
                            <span>First Name:</span>
                            <%= item.Fname %>
                        </td>
                        <td>
                            <span>Last Name:</span>
                            <%= item.Lname %>
                        </td>
                        <td>
                            <span>Email:</span>
                            <%= item.Email %>
                        </td>


                        <td>
                            <span>Number:</span>
                            <%=item .Number%>
                        </td>

                        <td>
                            <span>Car Details:</span>
                            <%=item .Details%>
                        </td>

                        <td>
                            <span>Admin Response:</span>
                            <%= item.adminResponse || 'Pending' %>
                        </td>
                        </td>
                        <td>
                            <span>Admin Message:</span>
                            <%= item.adminMessage || 'No message' %>
                        </td>
                        <td>

                            <form action="/admin/approve-availability/<%= item._id %>" method="post">
                                <div class="review-container">

                                    <button class="btn">Approve</button>
                                </div>
                            </form>
                            <form action="/admin/refuse-availability/<%= item._id %>" method="post">
                                <div class="review-container">

                                    <button class="btn">Refuse</button>
                                </div>
                            </form>
                        </td>

                    </tr>


                    <% }); %>
            </tbody>
        </table>

    </section>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <%- include("./partials/footer") %>
</body>

</html>